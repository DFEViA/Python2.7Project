本章将会介绍如何应用Python出色的文本处理能力
20.1问题是什么
在开始编写原型之前，先定义一些目标
1、输入不应该包含人工代码或者标签。
2、你应该能处理不同的块（block），比如标题、段落、列表项、内嵌文本（比如被强调的文本和URL）
3、尽管这个实现处理的是HTML。但把她扩展到其他标记语言应该也很容易

20.2有用的工具
1、要多文件进行读写，或者至少从标准输入读取（sys.stdin）,利用print输出。
2、需要对所输入的行进行迭代。
3、需要一些字符串方法。
4、需要一个或者两个生成器。
5、可能还需要用到re模块。

20.3准备工作

20.4初次实现

20.4.2添加一些标记
打印一些开始标记；
打印每个段落标签括起来的块；
打印一些借宿标记。
python simple_markup.py <test_input.txt> test_output.html

20.5再次实现
如果想让程序有更好的可扩展性，就要使它更加模块化（把功能都分解到单独的模块中）
1、语法分析器：一个读取文本，管理其他类的对象；
2、规则：可以为每个种类的块指定一条规则，规则能检测使用的块类型并且进行适当的格式化；
3、过滤器：使用过滤器来包装一些处理内嵌元素的正则表达式
4、处理程序：语法分析其使用处理程序来产生输出。每个处理程序能产生不同种类的标记。

20.5.1 处理程序

20.5.2 处理程序的超类
callback方法需要研究

20.5.3 规则
1、能识别自己适用于哪种块（条件）；
2、能对块进行转换（操作）；

20.5.4 规则的超类

20.5.5 过滤器

20.5.6 语法分析器

20.5.7 构造规则和过滤器